<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Môi Trường Số Học Tập</title>
  <style>
    :root{
      --accent:#0072ff; --accent-2:#00c6ff; --muted:#6b7280;
      --bg:#f9fafb; --card:#fff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);color:#1f2937}
    /* Header */
    header{background:var(--card);display:flex;align-items:center;justify-content:space-between;padding:12px 28px;border-bottom:1px solid #e6eef8;position:sticky;top:0;z-index:30}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .logo{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;background:linear-gradient(135deg,var(--accent-2),var(--accent))}
    .brand .title{line-height:1}
    .brand .title h1{margin:0;font-size:17px}
    .brand .title p{margin:0;font-size:12px;color:var(--muted)}
    nav{display:flex;align-items:center;gap:10px}
    nav a, nav button{font-weight:600;background:transparent;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;color:#1f2937;text-decoration:none}
    nav a:hover, nav button:hover{background:#f1f5f9}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-primary:hover{background:#005bd1}
    /* Main placeholder */
    main{padding:40px;min-height:60vh;display:flex;align-items:center;justify-content:center}
    .empty{color:var(--muted);font-size:18px}
    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center;z-index:60}
    .modal{width:100%;max-width:420px;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 12px 40px rgba(2,6,23,0.2)}
    .modal h3{margin:0 0 8px}
    .form-group{margin-top:10px}
    input{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6eef8;font-size:14px}
    .row{display:flex;gap:8px}
    .small{font-size:13px;color:var(--muted);margin-top:8px}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:14px}
    .link{background:transparent;border:0;color:var(--accent);cursor:pointer;padding:8px;border-radius:8px}
    .error{color:#b91c1c;font-size:13px;margin-top:8px}
    /* responsive */
    @media(max-width:520px){header{padding:10px 14px}.brand .title h1{font-size:15px}}
  </style>
</head>
<body>

  <header>
    <div class="brand">
      <div class="logo">ED</div>
      <div class="title">
        <h1>Môi Trường Số Học Tập</h1>
        <p>Học — Chia sẻ — Kết nối</p>
      </div>
    </div>

    <nav id="nav">
      <a href="#" id="nav-features">Tính năng</a>
      <a href="#" id="nav-courses">Khóa học</a>
      <a href="community.html">Cộng đồng</a>
      <button id="btn-signup" class="">Đăng ký</button>
      <button id="btn-login" class="btn-primary">Đăng nhập</button>
    </nav>
  </header>

  <main>
    <div class="empty">Trang chủ đang rỗng — bạn có thể thêm nội dung tại đây.</div>
  </main>

  <!-- Login Modal -->
  <div id="modalLogin" style="display:none" aria-hidden="true">
    <div class="modal-backdrop" role="dialog" aria-modal="true">
      <div class="modal" role="document">
        <h3>Đăng nhập</h3>
        <div class="form-group">
          <label for="loginUser">Tên đăng nhập</label>
          <input id="loginUser" type="text" placeholder="Nhập tên đăng nhập" />
        </div>
        <div class="form-group">
          <label for="loginPass">Mật khẩu</label>
          <input id="loginPass" type="password" placeholder="Nhập mật khẩu" />
        </div>
        <div id="loginError" class="error" style="display:none"></div>

        <div class="actions">
          <button class="link" id="toSignupFromLogin">Chưa có tài khoản?</button>
          <div style="flex:1"></div>
          <button id="closeLogin" class="link">Hủy</button>
          <button id="submitLogin" class="btn-primary">Đăng nhập</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Signup Modal -->
  <div id="modalSignup" style="display:none" aria-hidden="true">
    <div class="modal-backdrop" role="dialog" aria-modal="true">
      <div class="modal" role="document">
        <h3>Đăng ký</h3>
        <div class="form-group">
          <label for="signupUser">Tên đăng nhập</label>
          <input id="signupUser" type="text" placeholder="Chọn tên đăng nhập" />
        </div>
        <div class="form-group">
          <label for="signupPass">Mật khẩu</label>
          <input id="signupPass" type="password" placeholder="Mật khẩu" />
        </div>
        <div id="signupError" class="error" style="display:none"></div>

        <div class="actions">
          <button class="link" id="toLoginFromSignup">Đã có tài khoản?</button>
          <div style="flex:1"></div>
          <button id="closeSignup" class="link">Hủy</button>
          <button id="submitSignup" class="btn-primary">Đăng ký</button>
        </div>
      </div>
    </div>
  </div>

<script>
  // Helpers
  const $ = sel => document.querySelector(sel);
  const show = el => { el.style.display='block'; el.setAttribute('aria-hidden','false'); }
  const hide = el => { el.style.display='none'; el.setAttribute('aria-hidden','true'); }

  // Elements
  const modalLogin = document.getElementById('modalLogin');
  const modalSignup = document.getElementById('modalSignup');
  const btnLogin = document.getElementById('btn-login');
  const btnSignup = document.getElementById('btn-signup');
  const navEl = document.getElementById('nav');

  // Open/close handlers
  btnLogin.addEventListener('click', ()=>{ show(modalLogin); $('#loginUser').focus(); $('#loginError').style.display='none'; });
  btnSignup.addEventListener('click', ()=>{ show(modalSignup); $('#signupUser').focus(); $('#signupError').style.display='none'; });

  $('#closeLogin').addEventListener('click', ()=> hide(modalLogin));
  $('#closeSignup').addEventListener('click', ()=> hide(modalSignup));
  $('#toSignupFromLogin').addEventListener('click', ()=>{ hide(modalLogin); show(modalSignup); $('#signupUser').focus(); });
  $('#toLoginFromSignup').addEventListener('click', ()=>{ hide(modalSignup); show(modalLogin); $('#loginUser').focus(); });

  // Escape to close
  document.addEventListener('keydown', (e)=> {
    if(e.key === 'Escape'){ hide(modalLogin); hide(modalSignup); }
  });

  // LocalStorage helpers
  function getUsers(){ return JSON.parse(localStorage.getItem('users')||'[]'); }
  function saveUsers(u){ localStorage.setItem('users', JSON.stringify(u)); }

  // Signup logic
  document.getElementById('submitSignup').addEventListener('click', ()=>{
    const u = $('#signupUser').value.trim();
    const p = $('#signupPass').value;
    const err = $('#signupError');
    err.style.display='none';
    if(!u || !p){ err.textContent='Vui lòng điền đủ thông tin.'; err.style.display='block'; return; }
    const users = getUsers();
    if(users.find(x=>x.username === u)){ err.textContent='Tên đăng nhập đã tồn tại.'; err.style.display='block'; return; }
    users.push({ username: u, password: p });
    saveUsers(users);
    hide(modalSignup);
    // Auto-login after signup
    localStorage.setItem('username', u);
    updateNavForLoggedIn();
    alert('Đăng ký thành công! Bạn đã được đăng nhập.');
  });

  // Login logic
  document.getElementById('submitLogin').addEventListener('click', ()=>{
    const u = $('#loginUser').value.trim();
    const p = $('#loginPass').value;
    const err = $('#loginError');
    err.style.display='none';
    if(!u || !p){ err.textContent='Vui lòng điền đủ thông tin.'; err.style.display='block'; return; }
    const users = getUsers();
    const found = users.find(x=>x.username === u && x.password === p);
    if(!found){ err.textContent='Sai tên đăng nhập hoặc mật khẩu.'; err.style.display='block'; return; }
    hide(modalLogin);
    localStorage.setItem('username', u);
    updateNavForLoggedIn();
    alert('Đăng nhập thành công!');
  });

  // Update nav when logged in
  function updateNavForLoggedIn(){
    const username = localStorage.getItem('username');
    if(!username) return resetNav();
    navEl.innerHTML = `
      <a href="#" id="nav-features-main">Tính năng</a>
      <a href="#" id="nav-courses-main">Khóa học</a>
      <a href="community.html">Cộng đồng</a>
      <span style="margin-left:12px">Xin chào, <strong id="nav-user">${username}</strong></span>
      <button id="logoutBtn" class="link" style="margin-left:8px">Đăng xuất</button>
    `;
    $('#logoutBtn').addEventListener('click', ()=>{
      localStorage.removeItem('username');
      resetNav();
    });
  }

  function resetNav(){
    navEl.innerHTML = `
      <a href="#" id="nav-features">Tính năng</a>
      <a href="#" id="nav-courses">Khóa học</a>
      <a href="community.html">Cộng đồng</a>
      <button id="btn-signup" class="">Đăng ký</button>
      <button id="btn-login" class="btn-primary">Đăng nhập</button>
    `;
    // re-bind signup/login buttons
    document.getElementById('btn-login').addEventListener('click', ()=>{ show(modalLogin); $('#loginUser').focus(); $('#loginError').style.display='none'; });
    document.getElementById('btn-signup').addEventListener('click', ()=>{ show(modalSignup); $('#signupUser').focus(); $('#signupError').style.display='none'; });
  }

  // Init
  (function init(){
    if(localStorage.getItem('username')) updateNavForLoggedIn();
    // accessibility: click outside modal closes it
    document.addEventListener('click', function(e){
      // if click on backdrop (not inside modal)
      const backdrops = document.querySelectorAll('.modal-backdrop');
      backdrops.forEach(b => {
        if(b.style.display !== 'none' && !b.contains(e.target.closest('.modal')) && !e.target.closest('.modal')){
          hide(modalLogin); hide(modalSignup);
        }
      });
    }, true);
  })();
</script>

</body>
</html>
